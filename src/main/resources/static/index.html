<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S3 Bucket Explorer</title>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- App Styles -->
    <link rel="stylesheet" href="styles.css?v=2">
</head>
<body>
    <!-- Header -->
    <header class="app-header">
        <div class="header-left">
            <h1>S3 Bucket Explorer</h1>
            <div class="header-meta">
                <span class="bucket-label" id="bucket-info">Loading bucket information...</span>
                <span class="mode-badge" id="mode-indicator">
                    <i class="fas fa-circle-notch fa-spin" aria-hidden="true"></i>
                    Loading...
                </span>
            </div>
        </div>
        <div style="display: flex; gap: 8px;">
            <button id="dark-mode-btn" class="theme-toggle" title="Toggle theme" aria-label="Toggle dark mode">
                <i class="fas fa-moon" aria-hidden="true"></i>
            </button>
            <button id="logout-btn" class="theme-toggle" title="Logout" aria-label="Logout">
                <i class="fas fa-sign-out-alt" aria-hidden="true"></i>
            </button>
        </div>
    </header>

    <!-- Breadcrumb -->
    <nav class="breadcrumb-bar" aria-label="breadcrumb">
        <ol class="pf-c-breadcrumb__list" id="breadcrumb">
            <li class="pf-c-breadcrumb__item active" data-path="">
                <span class="pf-c-breadcrumb__item-text">Root</span>
            </li>
        </ol>
    </nav>

    <!-- Toolbar -->
    <div class="toolbar">
        <div class="toolbar-actions">
            <button id="refresh-btn" class="btn btn-primary">
                <i class="fas fa-sync-alt" aria-hidden="true"></i>
                Refresh
            </button>
            <button id="upload-btn" class="btn btn-success">
                <i class="fas fa-upload" aria-hidden="true"></i>
                Upload
            </button>
            <button id="delete-selected-btn" class="btn btn-danger" disabled>
                <i class="fas fa-trash" aria-hidden="true"></i>
                Delete Selected
            </button>
        </div>
        <div class="toolbar-search">
            <i class="fas fa-search search-icon" aria-hidden="true"></i>
            <input type="text" id="search-input" placeholder="Search files..." aria-label="Search files">
        </div>
    </div>

    <!-- Content -->
    <div class="content-area">
        <div class="content-card">
            <div class="file-browser">
                <table role="grid" aria-label="File listing">
                    <thead>
                        <tr role="row">
                            <th role="columnheader">
                                <input type="checkbox" id="select-all" aria-label="Select all files">
                            </th>
                            <th role="columnheader" scope="col">Name</th>
                            <th role="columnheader" scope="col">Size</th>
                            <th role="columnheader" scope="col">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="file-list" role="rowgroup">
                        <tr>
                            <td colspan="4">
                                <div class="pf-l-bullseye">
                                    <div class="pf-c-spinner" role="progressbar" aria-label="Loading files">
                                        <span class="pf-c-spinner__clipper"></span>
                                        <span class="pf-c-spinner__lead-ball"></span>
                                        <span class="pf-c-spinner__tail-ball"></span>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Preview Modal -->
    <div id="preview-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="preview-title" style="display: none;">
        <div class="modal-header">
            <h1 id="preview-title">File Preview</h1>
            <button class="modal-close close" type="button" aria-label="Close dialog">
                <i class="fas fa-times" aria-hidden="true"></i>
            </button>
        </div>
        <div class="modal-body">
            <div id="preview-container"></div>
            <div id="edit-container" style="display: none;">
                <textarea id="file-editor" class="form-control" rows="20"></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <div id="preview-actions" class="pf-l-flex pf-m-justify-content-flex-end pf-m-gap-sm">
                <button id="edit-file-btn" class="btn btn-primary" style="display: none;">
                    <i class="fas fa-edit" aria-hidden="true"></i>
                    Edit
                </button>
            </div>
            <div id="edit-actions" class="pf-l-flex pf-m-justify-content-flex-end pf-m-gap-sm" style="display: none;">
                <button id="cancel-edit-btn" class="btn btn-secondary">
                    <i class="fas fa-times" aria-hidden="true"></i>
                    Cancel
                </button>
                <button id="save-file-btn" class="btn btn-primary">
                    <i class="fas fa-save" aria-hidden="true"></i>
                    Save
                </button>
            </div>
        </div>
    </div>

    <!-- Upload Modal -->
    <div id="upload-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="upload-title" style="display: none;">
        <div class="modal-header">
            <h1 id="upload-title">Upload Files</h1>
            <button class="modal-close close" type="button" aria-label="Close dialog">
                <i class="fas fa-times" aria-hidden="true"></i>
            </button>
        </div>
        <div class="modal-body">
            <form id="upload-form" enctype="multipart/form-data">
                <div class="form-group">
                    <label class="form-label" for="file-input">
                        Select Files <span class="required" aria-hidden="true">*</span>
                    </label>
                    <input class="form-control" type="file" id="file-input" name="file" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="custom-key">
                        Custom Key (optional)
                    </label>
                    <input class="form-control" type="text" id="custom-key" name="custom-key" placeholder="Leave blank to use filename">
                    <div class="form-helper">
                        Current path: <span id="current-path-display"></span>
                    </div>
                </div>
                <div class="form-group" style="margin-top: 20px;">
                    <button type="submit" class="btn btn-primary">Upload</button>
                </div>
            </form>
            <div id="upload-progress" style="display: none;">
                <div class="progress-container">
                    <div class="progress-header">
                        <span id="progress-description">Uploading...</span>
                        <span id="progress-percentage">0%</span>
                    </div>
                    <div class="progress-track" role="progressbar" aria-label="Upload progress" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                        <div class="progress-fill" style="width: 0%;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal backdrop -->
    <div class="modal-backdrop" style="display: none;"></div>

    <script src="app.js"></script>
</body>
</html>
